<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>今予's Homepage</title>
    <link rel="icon" type="image/jpeg" href="https://s2.loli.net/2024/08/14/UuaJ1elnkKgGChN.jpg">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <style>
        @font-face {
            font-family: "sakura";
            src: url("./sakura.min.ttf") format("truetype");
        }

        /* --- 基础设置 --- */
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden; /* 禁止滚动 */
            background-color: #020205; /* 兜底极深色 */
            font-family: 'sakura', sans-serif;
        }

        /* Canvas 全屏铺满 */
        #startrack {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1;
            /* 移除 CSS 背景，改为 JS 绘制，防止黑屏 */
        }

        /* 视觉暗角，增加深邃感 */
        .vignette {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            box-shadow: inset 0 0 250px rgba(0,0,0,0.9);
            pointer-events: none;
            z-index: 0;
        }

        /* --- 主内容卡片 --- */
        .main {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
            perspective: 1000px;
        }

        .glass-card {
            position: relative;
            /* 玻璃质感：半透明白 + 模糊 */
            background: rgba(255, 255, 255, 0.04);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 60px 90px;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.6);
            transition: transform 0.05s ease-out; /* 快速响应鼠标 */
        }

        /* --- 头像区域（强制圆形修复） --- */
        .avatar-container {
            position: relative;
            width: 130px;
            height: 130px;
            margin-bottom: 25px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .avatar-img {
            width: 130px;
            height: 130px;
            border-radius: 50% !important; /* 强制最高优先级 */
            object-fit: cover;
            border: 3px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 30px rgba(255, 100, 200, 0.5); /* 粉色光晕 */
            z-index: 2;
            background-color: #222; /* 图片加载前的占位色 */
        }

        /* 行星光环 */
        .orbit-ring {
            position: absolute;
            top: -15px;
            left: -15px;
            right: -15px;
            bottom: -15px;
            border-radius: 50%;
            border: 2px dashed rgba(255, 200, 245, 0.3);
            animation: spin 20s linear infinite;
            z-index: 1;
        }

        /* --- 文本排版 --- */
        .name {
            font-size: 3rem;
            color: #fff;
            text-shadow: 0 0 15px rgba(255, 100, 200, 0.9);
            margin-bottom: 8px;
            text-align: center;
            letter-spacing: 2px;
        }

        .role {
            font-size: 0.95rem;
            color: rgba(200, 220, 255, 0.7);
            letter-spacing: 1.5px;
            text-transform: uppercase;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin-bottom: 40px;
            text-align: center;
        }

        .separator { margin: 0 8px; color: #ff64c8; }

        /* --- 按钮组 --- */
        .btns {
            display: flex;
            gap: 25px;
        }

        .btn {
            position: relative;
            padding: 12px 35px;
            border-radius: 50px;
            background: linear-gradient(135deg, rgba(255,255,255,0.05), rgba(255,255,255,0.01));
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #ffc8f5;
            text-decoration: none;
            font-size: 1.2rem;
            overflow: hidden;
            transition: all 0.3s;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn:hover {
            border-color: #ffc8f5;
            background: rgba(255, 200, 245, 0.15);
            box-shadow: 0 0 25px rgba(255, 100, 200, 0.6);
            transform: translateY(-3px);
            color: #fff;
        }

        /* 扫光动画 */
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            background: linear-gradient(to right, transparent, rgba(255,255,255,0.5), transparent);
            transform: skewX(-25deg);
            transition: 0.5s;
        }
        .btn:hover::before {
            left: 150%;
            transition: 0.7s;
        }

        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* 移动端适配 */
        @media (max-width: 700px) {
            .glass-card { width: 85%; padding: 40px 20px; }
            .name { font-size: 2rem; }
            .btns { flex-direction: column; width: 100%; }
            .btn { width: 100%; box-sizing: border-box; }
        }
    </style>
</head>
<body>

    <canvas id="startrack"></canvas>
    <div class="vignette"></div>

    <div class="main">
        <div class="glass-card" id="tilt-card">
            <div class="avatar-container">
                <div class="orbit-ring"></div>
                <img src="https://s2.loli.net/2024/08/14/UuaJ1elnkKgGChN.jpg" class="avatar-img" alt="头像" style="border-radius: 50%;">
            </div>
            
            <div class="name">嘎嘎sama | 今予</div>
            <div class="role">Zhejiang University <span class="separator">|</span> Mechanical Engineering</div>

            <div class="btns">
                <a href="https://notion-next-is5zr145w-hjys-projects-4f1ab78d.vercel.app/" target="_blank" class="btn">博客</a>
                <a href="https://github.com/JYbestow" target="_blank" class="btn">Github</a>
                <a href="https://space.bilibili.com/402611949?spm_id_from=333.1007.0.0" target="_blank" class="btn">bilibili</a>
            </div>
        </div>
    </div>

    <script src="./zepto.min.js"></script>

    <script>
        window.requestAnimFrame = (function() {
            return window.requestAnimationFrame || function(callback) {
                window.setTimeout(callback, 1000 / 60);
            };
        })();

        $(function() {
            const canvas = document.getElementById('startrack');
            const ctx = canvas.getContext('2d');
            
            let cw, ch;

            // 初始化函数
            function resize() {
                cw = window.innerWidth;
                ch = window.innerHeight;
                canvas.width = cw;
                canvas.height = ch;
            }
            resize();
            window.addEventListener('resize', resize);

            let mx = 0, my = 0;
            
            // 鼠标视差 + 3D卡片
            document.addEventListener('mousemove', (e) => {
                mx = (e.clientX - cw / 2) / cw;
                my = (e.clientY - ch / 2) / ch;
                
                const card = document.getElementById('tilt-card');
                if (card) {
                    // 限制最大旋转角度为 15 度
                    card.style.transform = `perspective(1000px) rotateX(${-my * 15}deg) rotateY(${mx * 15}deg)`;
                }
            });

            document.addEventListener('mouseleave', () => {
                const card = document.getElementById('tilt-card');
                if (card) card.style.transform = `perspective(1000px) rotateX(0) rotateY(0)`;
            });

            // --- 粒子系统 ---

            class Star {
                constructor() {
                    this.reset();
                    // 初始位置随机分布
                    this.angle = Math.random() * Math.PI * 2;
                }

                reset() {
                    // 半径范围
                    this.r = Math.random() * Math.max(cw, ch) * 0.7 + 60; 
                    
                    // 越近越快 (模拟开普勒)
                    this.omega = (Math.random() * 0.5 + 0.5) * 800 / Math.pow(this.r, 1.5);
                    this.size = Math.random() * 2 + 0.5;
                    
                    // 颜色：中心偏白蓝，外围偏紫红
                    const ratio = (this.r - 60) / (Math.max(cw, ch) * 0.5);
                    const blue = 255;
                    const red = 100 + Math.floor(155 * ratio);
                    const alpha = Math.random() * 0.8 + 0.2;
                    this.color = `rgba(${red}, 180, ${blue}, ${alpha})`;
                }

                update() {
                    this.angle += this.omega * 0.05;
                    // 如果因为某种原因出界，可以重置（这里圆周运动一般不需要）
                }

                draw() {
                    const x = cw / 2 + Math.cos(this.angle) * this.r - mx * 30;
                    const y = ch / 2 + Math.sin(this.angle) * this.r - my * 30;
                    
                    ctx.beginPath();
                    ctx.arc(x, y, this.size, 0, Math.PI * 2);
                    ctx.fillStyle = this.color;
                    ctx.fill();
                }
            }

            // 爆炸粒子
            class Particle {
                constructor(x, y) {
                    this.x = x;
                    this.y = y;
                    const angle = Math.random() * Math.PI * 2;
                    const speed = Math.random() * 6 + 2;
                    this.vx = Math.cos(angle) * speed;
                    this.vy = Math.sin(angle) * speed;
                    this.life = 1;
                    // 粒子颜色：洋红/青色
                    this.colorVal = Math.random() > 0.5 ? "255, 100, 200" : "100, 200, 255"; 
                }
                update() {
                    this.x += this.vx;
                    this.y += this.vy;
                    this.vy += 0.2; // 重力
                    this.life -= 0.02;
                }
                draw() {
                    ctx.globalAlpha = this.life;
                    ctx.fillStyle = `rgba(${this.colorVal}, 1)`;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.globalAlpha = 1;
                }
            }

            const stars = [];
            const particles = [];
            for (let i = 0; i < 1200; i++) stars.push(new Star());

            document.addEventListener('mousedown', (e) => {
                for (let i = 0; i < 15; i++) particles.push(new Particle(e.clientX, e.clientY));
            });

            // 主循环
            function loop() {
                // 【核心修复】：不再用 CSS 背景，而是直接画出渐变背景
                // 创建一个从底部向上发射的紫光渐变
                const gradient = ctx.createRadialGradient(cw / 2, ch * 1.2, 0, cw / 2, ch * 1.2, cw);
                
                // 0.2 的透明度是拖尾的关键：每一帧覆盖一层半透明背景
                gradient.addColorStop(0, "rgba(70, 20, 80, 0.25)");   // 底部亮紫色
                gradient.addColorStop(0.4, "rgba(10, 15, 30, 0.25)");  // 中间深蓝
                gradient.addColorStop(1, "rgba(0, 0, 0, 0.25)");      // 远处纯黑

                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, cw, ch);

                // 星星叠加发光
                ctx.globalCompositeOperation = 'lighter';
                
                stars.forEach(s => {
                    s.update();
                    s.draw();
                });

                // 恢复默认绘制模式画爆炸粒子
                ctx.globalCompositeOperation = 'source-over';
                
                for (let i = particles.length - 1; i >= 0; i--) {
                    particles[i].update();
                    particles[i].draw();
                    if (particles[i].life <= 0) particles.splice(i, 1);
                }

                requestAnimFrame(loop);
            }

            loop();
        });
    </script>
</body>
</html>
