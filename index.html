<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>今予's Homepage</title>
    <link rel="icon" type="image/jpeg" href="https://s2.loli.net/2024/08/14/UuaJ1elnkKgGChN.jpg">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <style>
        /* 引入字体 */
        @font-face {
            font-family: "sakura";
            src: url("./sakura.min.ttf") format("truetype");
        }

        /* --- 关键修复：背景颜色设置在 body 上，绝对不会黑屏 --- */
        body {
            margin: 0;
            padding: 0;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            /* 绚丽的深空渐变背景：从底部的紫色过渡到顶部的深邃蓝 */
            background: radial-gradient(circle at bottom center, #4b2a45 0%, #1b2735 40%, #090a0f 100%);
            font-family: 'sakura', sans-serif;
        }

        /* Canvas 必须透明，且覆盖全屏 */
        canvas#startrack {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1; /* 在背景之上，内容之下 */
            pointer-events: none; /* 让鼠标事件能穿透到按钮 */
        }

        /* 主内容区域，层级最高 */
        .main {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10; /* 保证内容在最上层 */
            perspective: 1200px;
        }

        /* 玻璃卡片 - 增强通透感 */
        .glass-card {
            position: relative;
            background: rgba(255, 255, 255, 0.05); /* 极淡的白色 */
            backdrop-filter: blur(12px); /* 毛玻璃模糊 */
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.15); /* 亮边框 */
            border-radius: 24px;
            padding: 50px 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5); /* 浮起阴影 */
            transition: transform 0.1s ease-out;
        }

        /* 头像容器 - 修复圆角 */
        .avatar-container {
            position: relative;
            width: 130px;
            height: 130px;
            margin-bottom: 25px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* 强制圆形头像 */
        .avatar-img {
            width: 130px;
            height: 130px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 30px rgba(255, 200, 245, 0.6); /* 粉色发光 */
            z-index: 2;
        }

        /* 旋转光环 */
        .orbit-ring {
            position: absolute;
            top: -15px; left: -15px; right: -15px; bottom: -15px;
            border-radius: 50%;
            border: 2px dashed rgba(255, 200, 245, 0.3);
            animation: spin 20s linear infinite;
        }

        /* 文字样式 */
        .name {
            font-size: 2.8rem;
            color: #fff;
            text-shadow: 0 0 15px rgba(255, 100, 200, 0.8);
            margin-bottom: 10px;
            text-align: center;
            font-weight: bold;
            letter-spacing: 2px;
        }

        .role {
            font-size: 0.9rem;
            color: rgba(220, 230, 255, 0.8);
            letter-spacing: 1.5px;
            text-transform: uppercase;
            font-family: -apple-system, sans-serif;
            margin-bottom: 35px;
        }
        
        .separator { color: #ff64c8; margin: 0 8px; }

        /* 按钮组 */
        .btns { display: flex; gap: 25px; pointer-events: auto; }

        /* 按钮美化 */
        .btn {
            position: relative;
            padding: 12px 36px;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.25);
            color: #ffc8f5;
            text-decoration: none;
            font-size: 1.2rem;
            overflow: hidden;
            transition: all 0.3s;
            cursor: pointer;
        }

        .btn:hover {
            background: rgba(255, 200, 245, 0.2);
            box-shadow: 0 0 25px rgba(255, 100, 200, 0.5);
            border-color: #ffc8f5;
            transform: translateY(-3px);
            color: #fff;
        }

        /* 按钮流光动画 */
        .btn::after {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transform: skewX(-20deg);
            animation: shine 4s infinite;
        }

        @keyframes spin { 100% { transform: rotate(360deg); } }
        @keyframes shine { 0% { left: -100%; } 20% { left: 200%; } 100% { left: 200%; } }

        /* 移动端适配 */
        @media (max-width: 700px) {
            .glass-card { width: 85%; padding: 40px 20px; }
            .name { font-size: 2rem; }
            .btns { flex-direction: column; width: 100%; }
            .btn { width: 100%; text-align: center; }
        }
    </style>
</head>
<body>

    <canvas id="startrack"></canvas>

    <div class="main">
        <div class="glass-card" id="tilt-card">
            <div class="avatar-container">
                <div class="orbit-ring"></div>
                <img src="https://s2.loli.net/2024/08/14/UuaJ1elnkKgGChN.jpg" class="avatar-img" alt="头像">
            </div>
            
            <div class="name">嘎嘎sama | 今予</div>
            <div class="role">Zhejiang University <span class="separator">|</span> Mechanical Engineering</div>

            <div class="btns">
                <a href="https://notion-next-is5zr145w-hjys-projects-4f1ab78d.vercel.app/" target="_blank" class="btn">博客</a>
                <a href="https://github.com/JYbestow" target="_blank" class="btn">Github</a>
                <a href="https://space.bilibili.com/402611949?spm_id_from=333.1007.0.0" target="_blank" class="btn">bilibili</a>
            </div>
        </div>
    </div>

    <script src="./zepto.min.js"></script>

    <script>
        // 动画帧兼容
        window.requestAnimFrame = (function() {
            return window.requestAnimationFrame || function(callback) {
                window.setTimeout(callback, 1000 / 60);
            };
        })();

        $(function() {
            const canvas = document.getElementById('startrack');
            const ctx = canvas.getContext('2d');
            
            let cw, ch;

            // 1. 初始化 Canvas 尺寸 (强制铺满)
            function resize() {
                cw = window.innerWidth;
                ch = window.innerHeight;
                canvas.width = cw;
                canvas.height = ch;
            }
            resize();
            window.addEventListener('resize', resize);

            let mx = 0, my = 0;

            // 2. 鼠标交互
            document.addEventListener('mousemove', (e) => {
                mx = (e.clientX - cw / 2) / cw;
                my = (e.clientY - ch / 2) / ch;
                
                // 卡片 3D 倾斜
                const card = document.getElementById('tilt-card');
                if (card) {
                    card.style.transform = `perspective(1000px) rotateX(${-my * 15}deg) rotateY(${mx * 15}deg)`;
                }
            });
            
            // 鼠标移出复位
            document.addEventListener('mouseleave', () => {
                const card = document.getElementById('tilt-card');
                if (card) card.style.transform = `perspective(1000px) rotateX(0) rotateY(0)`;
            });

            // 3. 星星类
            class Star {
                constructor() {
                    this.reset();
                    // 初始随机分布
                    this.angle = Math.random() * Math.PI * 2;
                }

                reset() {
                    this.r = Math.random() * cw * 0.6 + 50; // 半径
                    this.omega = (Math.random() * 0.5 + 0.5) * 800 / Math.pow(this.r, 1.5); // 开普勒角速度
                    this.size = Math.random() * 2 + 0.5;
                    
                    // 颜色：中心蓝白，边缘紫红
                    const ratio = (this.r - 50) / (cw * 0.5);
                    const r = 200 + Math.floor(55 * ratio);
                    const g = 200 - Math.floor(100 * ratio);
                    const b = 255;
                    this.color = `rgba(${r}, ${g}, ${b}, ${Math.random() * 0.8 + 0.2})`;
                }

                update() {
                    this.angle += this.omega * 0.05;
                }

                draw() {
                    const x = cw / 2 + Math.cos(this.angle) * this.r - mx * 30;
                    const y = ch / 2 + Math.sin(this.angle) * this.r - my * 30;
                    
                    ctx.beginPath();
                    ctx.arc(x, y, this.size, 0, Math.PI * 2);
                    ctx.fillStyle = this.color;
                    ctx.fill();
                }
            }

            const stars = [];
            for (let i = 0; i < 1000; i++) stars.push(new Star());

            // 4. 点击爆炸特效
            const particles = [];
            class Particle {
                constructor(x, y) {
                    this.x = x; this.y = y;
                    const angle = Math.random() * Math.PI * 2;
                    const speed = Math.random() * 5 + 2;
                    this.vx = Math.cos(angle) * speed;
                    this.vy = Math.sin(angle) * speed;
                    this.life = 1;
                    this.hue = Math.random() * 60 + 260; // 紫色系
                }
                update() {
                    this.x += this.vx; this.y += this.vy;
                    this.vy += 0.2; this.life -= 0.02;
                }
                draw() {
                    ctx.globalAlpha = this.life;
                    ctx.fillStyle = `hsla(${this.hue}, 80%, 70%, 1)`;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.globalAlpha = 1;
                }
            }
            
            document.addEventListener('mousedown', (e) => {
                for(let i=0; i<15; i++) particles.push(new Particle(e.clientX, e.clientY));
            });

            // 5. 核心渲染循环
            function loop() {
                // 【核心修复】使用 destination-out 擦除画布，而不是 source-over 覆盖
                // 这会让星星的轨迹变透明，从而露出 CSS 设置的紫色背景！
                ctx.globalCompositeOperation = 'destination-out';
                ctx.fillStyle = 'rgba(0, 0, 0, 0.1)'; // 0.1 控制拖尾长度
                ctx.fillRect(0, 0, cw, ch);

                // 切换回正常绘制模式，使用 lighter 让星星叠加发光
                ctx.globalCompositeOperation = 'lighter';

                stars.forEach(s => {
                    s.update();
                    s.draw();
                });

                // 绘制粒子
                ctx.globalCompositeOperation = 'source-over';
                for (let i = particles.length - 1; i >= 0; i--) {
                    particles[i].update();
                    particles[i].draw();
                    if (particles[i].life <= 0) particles.splice(i, 1);
                }

                requestAnimFrame(loop);
            }

            loop();
        });
    </script>
</body>
</html>
