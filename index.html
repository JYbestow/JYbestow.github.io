<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>ä»Šäºˆ's Homepage - Dimension X</title>
    <link rel="icon" type="image/jpeg" href="https://s2.loli.net/2024/08/14/UuaJ1elnkKgGChN.jpg">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>

    <style>
        @font-face {
            font-family: "sakura";
            src: url("./sakura.min.ttf") format("truetype");
        }

        body {
            margin: 0; padding: 0; width: 100vw; height: 100vh; overflow: hidden;
            background-color: #000;
            font-family: 'sakura', sans-serif;
            user-select: none; -webkit-user-select: none;
        }

        /* 3D ç”»å¸ƒ */
        #world {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1; outline: none;
        }

        /* æ‘„åƒå¤´é¢„è§ˆ (è°ƒè¯•ç”¨ï¼Œå¹³æ—¶éšè—æˆ–å¾®ç¼©) */
        #input_video {
            position: fixed; bottom: 20px; left: 20px; width: 160px; height: 120px;
            border-radius: 10px; border: 1px solid rgba(80, 255, 255, 0.3);
            opacity: 0; pointer-events: none; transition: opacity 0.5s;
            z-index: 999; transform: scaleX(-1); /* é•œåƒç¿»è½¬ */
        }
        #input_video.active { opacity: 0.8; }

        /* ä¸»å†…å®¹å±‚ */
        .main {
            position: relative; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            z-index: 10; pointer-events: none; /* è®©é¼ æ ‡ç©¿é€åˆ° Canvas */
        }

        /* ç»ç’ƒå¡ç‰‡ */
        .glass-card {
            position: relative; pointer-events: auto;
            background: rgba(20, 20, 25, 0.4);
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px; padding: 50px 80px;
            display: flex; flex-direction: column; align-items: center;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            transition: transform 0.1s ease-out;
        }

        .avatar-img {
            width: 130px; height: 130px; border-radius: 50%; object-fit: cover;
            border: 3px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 30px rgba(255, 200, 245, 0.6);
        }

        .name {
            font-size: 2.8rem; color: #fff; text-shadow: 0 0 15px rgba(255, 100, 200, 0.8);
            margin: 15px 0 10px 0; text-align: center; font-weight: bold; letter-spacing: 2px;
        }

        .role {
            font-size: 0.9rem; color: rgba(220, 230, 255, 0.8); letter-spacing: 1.5px;
            text-transform: uppercase; font-family: sans-serif;
            margin-bottom: 35px; text-align: center;
            display: flex; flex-direction: row; gap: 8px;
        }
        .separator { color: #ff64c8; }

        .btns { display: flex; gap: 25px; }
        .btn {
            padding: 12px 36px; border-radius: 50px;
            background: rgba(255, 255, 255, 0.08); border: 1px solid rgba(255, 255, 255, 0.25);
            color: #ffc8f5; text-decoration: none; font-size: 1.2rem;
            transition: all 0.3s; cursor: pointer;
        }
        .btn:hover {
            background: rgba(255, 200, 245, 0.2); box-shadow: 0 0 25px rgba(255, 100, 200, 0.5);
            border-color: #ffc8f5; transform: translateY(-3px); color: #fff;
        }

        /* --- å³ä¸‹è§’æ§åˆ¶åŒº --- */
        .control-dock {
            position: fixed; bottom: 30px; right: 30px; z-index: 100;
            display: flex; gap: 15px; align-items: center; pointer-events: auto;
        }

        /* åŠŸèƒ½æŒ‰é’®æ ·å¼ */
        .dock-btn {
            width: 50px; height: 50px; border-radius: 50%;
            background: rgba(0,0,0,0.6); border: 1px solid rgba(255,255,255,0.2);
            color: #fff; font-size: 20px; display: flex; justify-content: center; align-items: center;
            cursor: pointer; transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            backdrop-filter: blur(5px);
        }
        .dock-btn:hover { transform: scale(1.1); border-color: #50ffff; box-shadow: 0 0 15px #50ffff; color: #50ffff; }
        .dock-btn.active { background: #50ffff; color: #000; box-shadow: 0 0 20px #50ffff; }

        /* é”®ç›˜æç¤º */
        .hint-box {
            position: absolute; right: 140px; bottom: 10px; /* è°ƒæ•´ä½ç½® */
            background: rgba(0, 20, 40, 0.85); border: 1px solid rgba(80, 255, 255, 0.3);
            padding: 8px 12px; border-radius: 8px; color: #50ffff; font-family: monospace; font-size: 12px;
            opacity: 0; transform: translateX(20px); transition: all 0.3s; pointer-events: none; white-space: nowrap;
        }
        .hint-trigger:hover + .hint-box, .hint-box.active { opacity: 1; transform: translateX(0); }
        kbd {
            background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); border-radius: 3px;
            padding: 2px 4px; margin: 0 2px; font-weight: bold;
        }
        kbd.active { background: #50ffff; color: #000; box-shadow: 0 0 10px #50ffff; }

        /* çŠ¶æ€åŠ è½½æ¡ */
        #loading-bar {
            position: fixed; top: 0; left: 0; height: 3px; background: #50ffff; width: 0%;
            z-index: 2000; transition: width 0.3s; box-shadow: 0 0 10px #50ffff;
        }

        /* ç§»åŠ¨ç«¯é€‚é… */
        @media (max-width: 700px) {
            .glass-card { width: 85%; padding: 40px 20px; }
            .role { flex-direction: column; }
            .separator { display: none; }
            .btns { flex-direction: column; width: 100%; }
            .btn { width: 100%; box-sizing: border-box; text-align: center; }
            .hint-trigger, .hint-box { display: none; } /* ç§»åŠ¨ç«¯éšè—é”®ç›˜æç¤º */
        }
    </style>
</head>
<body>

    <div id="world"></div>
    
    <video id="input_video" autoplay playsinline></video>
    <div id="loading-bar"></div>

    <div class="main">
        <div class="glass-card" id="tilt-card">
            <div class="avatar-container">
                <img src="https://s2.loli.net/2024/08/14/UuaJ1elnkKgGChN.jpg" class="avatar-img" alt="å¤´åƒ">
            </div>
            <div class="name">å˜å˜sama | ä»Šäºˆ</div>
            <div class="role">
                <span>Zhejiang University</span>
                <span class="separator">|</span>
                <span>Mechanical Engineering</span>
            </div>
            <div class="btns">
                <a href="https://notion-next-is5zr145w-hjys-projects-4f1ab78d.vercel.app/" target="_blank" class="btn">åšå®¢</a>
                <a href="https://github.com/JYbestow" target="_blank" class="btn">Github</a>
                <a href="https://space.bilibili.com/402611949?spm_id_from=333.1007.0.0" target="_blank" class="btn">bilibili</a>
            </div>
        </div>
    </div>

    <div class="control-dock">
        <div class="dock-btn hint-trigger">âŒ¨ï¸</div>
        <div class="hint-box" id="konami-hint">
            Code: <kbd>â†‘</kbd><kbd>â†‘</kbd><kbd>â†“</kbd><kbd>â†“</kbd><kbd>â†</kbd><kbd>â†’</kbd><kbd>â†</kbd><kbd>â†’</kbd><kbd>B</kbd><kbd>A</kbd>
        </div>

        <div class="dock-btn" id="hand-btn" title="Enable Hand Control">ğŸ–ï¸</div>
        
        <div class="dock-btn" id="fs-btn" title="Toggle Fullscreen">â›¶</div>
    </div>

    <script>
        // --- 1. Three.js åˆå§‹åŒ– ---
        const scene = new THREE.Scene();
        // å¢åŠ ä¸€ç‚¹ç¯å¢ƒé›¾æ°”ï¼Œè®©è¿œå¤„æ›´æ·±é‚ƒ
        scene.fog = new THREE.FogExp2(0x000000, 0.0008);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
        camera.position.z = 100; // åˆå§‹ç›¸æœºä½ç½®

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio); // æè‡´æ¸…æ™°åº¦
        document.getElementById('world').appendChild(renderer.domElement);

        // --- 2. ç²’å­ç³»ç»Ÿæ„å»º (Geometry & Shader Material) ---
        const PARTICLE_COUNT = 8000; // ç²’å­æ•°é‡ï¼Œä¸è®¡æˆæœ¬
        const geometry = new THREE.BufferGeometry();
        const positions = new Float32Array(PARTICLE_COUNT * 3);
        const colors = new Float32Array(PARTICLE_COUNT * 3);
        const sizes = new Float32Array(PARTICLE_COUNT);
        const phases = new Float32Array(PARTICLE_COUNT); // ç”¨äºå­˜å‚¨æ¯ä¸ªç²’å­çš„ç‹¬ç‰¹ç›¸ä½

        const colorPalette = [
            new THREE.Color('#50ffff'), // é’è‰²
            new THREE.Color('#ff00ff'), // ç´«è‰²
            new THREE.Color('#ffffff'), // ç™½è‰²
            new THREE.Color('#0000ff')  // æ·±è“
        ];

        // åˆå§‹åŒ–ç²’å­ä½ç½®ï¼ˆå¸ç§¯ç›˜åˆ†å¸ƒï¼‰
        for (let i = 0; i < PARTICLE_COUNT; i++) {
            // æåæ ‡éšæœºåˆ†å¸ƒï¼Œä¸­å¿ƒå¯†é›†ï¼Œè¾¹ç¼˜ç¨€ç–
            const r = Math.random() * 150 + 20; 
            const theta = Math.random() * Math.PI * 2;
            // åˆå§‹é«˜åº¦ç¨å¾®æ‰å¹³ï¼Œæ¨¡æ‹Ÿæ˜Ÿç›˜
            const phi = (Math.random() - 0.5) * 0.5; 

            const x = r * Math.cos(theta);
            const y = (Math.random() - 0.5) * 10; // æ‰å¹³åšåº¦
            const z = r * Math.sin(theta);

            positions[i * 3] = x;
            positions[i * 3 + 1] = y;
            positions[i * 3 + 2] = z;

            // é¢œè‰²åˆ†é…
            const color = colorPalette[Math.floor(Math.random() * colorPalette.length)];
            colors[i * 3] = color.r;
            colors[i * 3 + 1] = color.g;
            colors[i * 3 + 2] = color.b;

            sizes[i] = Math.random();
            phases[i] = Math.random() * Math.PI * 2; // éšæœºç›¸ä½
        }

        geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
        geometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));
        geometry.setAttribute('phase', new THREE.BufferAttribute(phases, 1));

        // è‡ªå®šä¹‰æè´¨ï¼šä¸ºäº†å®ç°æè‡´çš„å…‰æ•ˆå’Œç‰©ç†ç›´è§‰ï¼ˆå¤§å°éšè·ç¦»å˜åŒ–ï¼Œå…‰æ™•ï¼‰
        // è¿™é‡Œä½¿ç”¨ SpriteTexture æ¨¡æ‹Ÿå‘å…‰çƒä½“
        const spriteTexture = new THREE.TextureLoader().load('https://threejs.org/examples/textures/sprites/spark1.png');

        const material = new THREE.PointsMaterial({
            size: 2,
            map: spriteTexture,
            vertexColors: true,
            blending: THREE.AdditiveBlending,
            depthWrite: false,
            transparent: true,
            opacity: 0.8
        });

        const particleSystem = new THREE.Points(geometry, material);
        scene.add(particleSystem);

        // --- 3. ç‰©ç†ä¸åŠ¨ç”»é€»è¾‘ ---
        
        let handFactor = 0; // æ‰‹åŠ¿æ§åˆ¶å› å­ï¼š0 = æ­£å¸¸ï¼Œ1 = æå¤§å¼ å¼€ï¼Œ-1 = æ¡æ‹³
        let targetHandFactor = 0; // ç›®æ ‡å› å­ï¼ˆç”¨äºå¹³æ»‘ Lerpï¼‰
        let time = 0;

        function animate() {
            requestAnimationFrame(animate);
            time += 0.005;

            // å¹³æ»‘æ‰‹åŠ¿æ•°æ®
            handFactor += (targetHandFactor - handFactor) * 0.1;

            const positions = particleSystem.geometry.attributes.position.array;
            const sizes = particleSystem.geometry.attributes.size.array;
            
            // åŸºç¡€æ—¶é—´æµé€Ÿï¼šæ‰‹å¼ å¼€è¶Šå¤§çº¦å¿«ï¼Œæ¡æ‹³åˆ™å˜æ…¢
            const timeScale = 1 + handFactor * 2; 

            for (let i = 0; i < PARTICLE_COUNT; i++) {
                const i3 = i * 3;
                let x = positions[i3];
                let y = positions[i3 + 1];
                let z = positions[i3 + 2];

                // è®¡ç®—å½“å‰åŠå¾„
                let r = Math.sqrt(x*x + z*z);
                
                // --- ç‰©ç†è§„åˆ™ A: å¼€æ™®å‹’è¿åŠ¨ ---
                // é€Ÿåº¦ä¸åŠå¾„æˆåæ¯” v ~ 1/sqrt(r)
                let speed = (100 / Math.pow(r, 1.5)) * timeScale;
                
                // åº”ç”¨æ—‹è½¬
                let theta = Math.atan2(z, x) + speed * 0.02; // 0.02 æ˜¯åŸºç¡€ç³»æ•°
                
                // --- ç‰©ç†è§„åˆ™ B: æ‰‹åŠ¿æ§åˆ¶ (è†¨èƒ€/å¡Œç¼©) ---
                // åŸºäº handFactor æ”¹å˜åŠå¾„ã€‚
                // è†¨èƒ€æ—¶ï¼Œç²’å­å‘å¤–æ¨ï¼ŒåŒæ—¶å‘å±å¹•ï¼ˆZè½´è´Ÿæ–¹å‘æ˜¯è¿œç¦»ï¼Œæ­£æ–¹å‘æ˜¯é è¿‘ï¼‰ç§»åŠ¨
                let expansion = handFactor * 1.5; 
                let newR = r + expansion; 

                // --- ç‰©ç†è§„åˆ™ C: æ··æ²Œæ•ˆåº” (å¸ƒæœ—è¿åŠ¨) ---
                // å½“ç²’å­ç¦»å±å¹•å¤ªè¿‘ (z > 80) æˆ–è†¨èƒ€ç³»æ•°è¿‡å¤§æ—¶
                let isChaos = (z > 60 || handFactor > 0.8);
                
                if (isChaos) {
                    // å åŠ é«˜é¢‘å™ªç‚¹
                    x += (Math.random() - 0.5) * 5 * handFactor; // ç–¯ç‹‚æŠ–åŠ¨
                    y += (Math.random() - 0.5) * 5 * handFactor;
                    z += (Math.random() - 0.5) * 5 * handFactor;
                    
                    // é¢œè‰²é—ªçƒï¼ˆæ¨¡æ‹Ÿé«˜èƒ½æ€ï¼‰
                    material.size = 3 + Math.random() * 5; 
                } else {
                    // æ­£å¸¸è½¨é“å›å½’
                    // é‡æ–°è®¡ç®— x, z
                    x = r * Math.cos(theta);
                    z = r * Math.sin(theta);
                    
                    // å¦‚æœæ‰‹å¼ å¼€ï¼Œè®©ç²’å­æ…¢æ…¢é è¿‘é•œå¤´ (Z å˜å¤§)
                    if (handFactor > 0.1) {
                        z += handFactor * 2;
                        x *= (1 + handFactor * 0.01);
                    }
                }

                // --- ç‰©ç†è§„åˆ™ D: äº®åº¦ä¸å¤§å°éšè·ç¦»å˜åŒ– ---
                // æ¨¡æ‹Ÿç‚¹å…‰æºç‰©ç†ï¼šç¦»ç›¸æœº(z=100)è¶Šè¿‘ï¼Œåº”è¯¥è¶Šäº®è¶Šå¤§
                // åŸå§‹zèŒƒå›´å¤§æ¦‚åœ¨ -150 åˆ° 150
                const distToCam = 150 - z; // ç²—ç•¥è·ç¦»
                // å¤§å°è¡°å‡ï¼šè¶Šè¿‘è¶Šå¤§
                let sizePhysics = (300 / distToCam); 
                
                // éœ€æ±‚ï¼šå°çš„æ—¶å€™æš—ï¼Œå¤§çš„æ—¶å€™äº®
                // æˆ‘ä»¬ç”¨ sizePhysics ä½œä¸ºäº®åº¦çš„åŸºå‡†
                if (sizePhysics < 0.5) sizePhysics = 0.5; // æœ€å°å¤§å°
                sizes[i] = sizePhysics * (isChaos ? 2 : 1); // æ··æ²Œæ—¶æ›´å¤§

                positions[i3] = x;
                positions[i3 + 1] = y;
                positions[i3 + 2] = z;
            }

            // æ›´æ–° Opacity æ¨¡æ‹Ÿäº®åº¦å˜åŒ– (å…¨å±€å½±å“)
            // æ‰‹å¼ å¼€è¶Šå¤§ï¼Œæ•´ä½“è¶Šäº®ï¼ˆèƒ½é‡çˆ†å‘ï¼‰
            material.opacity = 0.5 + handFactor * 0.5;

            particleSystem.geometry.attributes.position.needsUpdate = true;
            particleSystem.geometry.attributes.size.needsUpdate = true;

            renderer.render(scene, camera);
        }
        animate();

        // --- 4. çª—å£è‡ªé€‚åº” ---
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // --- 5. MediaPipe æ‰‹åŠ¿è¯†åˆ«é€»è¾‘ ---
        const videoElement = document.getElementById('input_video');
        const handBtn = document.getElementById('hand-btn');
        const loadingBar = document.getElementById('loading-bar');
        let isHandTrackingActive = false;
        let hands;
        let cameraFeed;

        function onResults(results) {
            loadingBar.style.width = '0%'; // è¯†åˆ«æˆåŠŸï¼Œè¿›åº¦æ¡å½’é›¶
            if (results.multiHandLandmarks && results.multiHandLandmarks.length > 0) {
                const landmarks = results.multiHandLandmarks[0];
                
                // è®¡ç®—æ‹‡æŒ‡æŒ‡å°–(4)å’Œé£ŸæŒ‡æŒ‡å°–(8)çš„è·ç¦»ï¼Œæˆ–è€…è®¡ç®—æ‰‹æŒå¼ å¼€ç¨‹åº¦
                // è¿™é‡Œä½¿ç”¨æ‰‹æŒè´¨å¿ƒåˆ°æŒ‡å°–çš„å¹³å‡è·ç¦»æ¥åˆ¤æ–­å¼ åˆ
                // ç®€å•ç‚¹ï¼šè®¡ç®— æ‹‡æŒ‡(4) å’Œ å°æŒ‡(20) çš„è·ç¦»ï¼Œå½’ä¸€åŒ–
                const thumbTip = landmarks[4];
                const pinkyTip = landmarks[20];
                const wrist = landmarks[0];

                const distOpen = Math.hypot(thumbTip.x - pinkyTip.x, thumbTip.y - pinkyTip.y);
                // ç”¨æ‰‹è…•åˆ°ä¸­æŒ‡æ ¹éƒ¨(9)ä½œä¸ºå‚è€ƒå°ºåº¦ï¼Œé˜²æ­¢æ‰‹ç¦»æ‘„åƒå¤´è¿œè¿‘å½±å“åˆ¤æ–­
                const scaleRef = Math.hypot(wrist.x - landmarks[9].x, wrist.y - landmarks[9].y);
                
                // å½’ä¸€åŒ–å¼ å¼€åº¦
                const openness = distOpen / (scaleRef * 1.5); // 1.5 æ˜¯ç»éªŒç³»æ•°

                // æ˜ å°„åˆ° handFactor (-1 åˆ° 1)
                // openness é€šå¸¸åœ¨ 0.2 (æ‹³å¤´) åˆ° 1.0 (å¼ å¼€) ä¹‹é—´
                if (openness < 0.3) {
                    targetHandFactor = -0.5; // æ¡æ‹³ï¼šæ”¶ç¼©
                } else if (openness > 0.8) {
                    targetHandFactor = 1.0; // å¤§å¼ ï¼šçˆ†å‘
                } else {
                    // ä¸­é—´çº¿æ€§æ˜ å°„
                    targetHandFactor = (openness - 0.3) * 2; 
                }
            } else {
                // æ²¡æœ‰æ£€æµ‹åˆ°æ‰‹ï¼Œæ…¢æ…¢æ¢å¤å¹³é™
                targetHandFactor = 0;
            }
        }

        async function startHandTracking() {
            loadingBar.style.width = '30%';
            
            hands = new Hands({locateFile: (file) => {
                return `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`;
            }});
            
            hands.setOptions({
                maxNumHands: 1,
                modelComplexity: 1,
                minDetectionConfidence: 0.5,
                minTrackingConfidence: 0.5
            });
            
            hands.onResults(onResults);

            cameraFeed = new Camera(videoElement, {
                onFrame: async () => {
                    await hands.send({image: videoElement});
                },
                width: 320,
                height: 240
            });

            loadingBar.style.width = '70%';
            await cameraFeed.start();
            loadingBar.style.width = '100%';
            setTimeout(() => loadingBar.style.width = '0%', 500);
            
            videoElement.classList.add('active');
            isHandTrackingActive = true;
            handBtn.classList.add('active');
        }

        function stopHandTracking() {
            if (cameraFeed) {
                // MediaPipe çš„ Camera utils å¾ˆéš¾å®Œå…¨åœæ­¢ï¼Œé€šå¸¸ç§»é™¤ DOM æˆ–åœæ­¢æµ
                const stream = videoElement.srcObject;
                if(stream) {
                    const tracks = stream.getTracks();
                    tracks.forEach(track => track.stop());
                }
                videoElement.srcObject = null;
            }
            videoElement.classList.remove('active');
            isHandTrackingActive = false;
            handBtn.classList.remove('active');
            targetHandFactor = 0; // é‡ç½®ç‰©ç†çŠ¶æ€
        }

        handBtn.addEventListener('click', () => {
            if (!isHandTrackingActive) {
                startHandTracking();
            } else {
                stopHandTracking();
            }
        });

        // --- 6. å…¶ä»– UI é€»è¾‘ ---
        
        // å…¨å±é€»è¾‘
        const fsBtn = document.getElementById('fs-btn');
        fsBtn.addEventListener('click', () => {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        });

        // é¼ æ ‡ 3D è§†å·®äº¤äº’ (ä¿ç•™ä¹‹å‰çš„ä½“éªŒ)
        let mouseX = 0, mouseY = 0;
        document.addEventListener('mousemove', (e) => {
            mouseX = (e.clientX - window.innerWidth / 2) / 100;
            mouseY = (e.clientY - window.innerHeight / 2) / 100;
            // å¾®è°ƒç›¸æœºä½ç½®
            camera.position.x += (mouseX - camera.position.x) * 0.05;
            camera.position.y += (-mouseY - camera.position.y) * 0.05;
            camera.lookAt(scene.position);
            
            // å¡ç‰‡å€¾æ–œ
            const card = document.getElementById('tilt-card');
            if(card) {
                const rx = (e.clientY / window.innerHeight - 0.5) * 20;
                const ry = (e.clientX / window.innerWidth - 0.5) * 20;
                card.style.transform = `perspective(1000px) rotateX(${-rx}deg) rotateY(${ry}deg)`;
            }
        });

        // Konami Code é€»è¾‘ (ä¿ç•™)
        const konamiCode = ['ArrowUp','ArrowUp','ArrowDown','ArrowDown','ArrowLeft','ArrowRight','ArrowLeft','ArrowRight','b','a'];
        let kIndex = 0;
        const hintBox = document.querySelector('.hint-box');
        const kbds = document.querySelectorAll('kbd');
        
        document.addEventListener('keydown', (e) => {
            if(e.key === konamiCode[kIndex]) {
                hintBox.classList.add('active');
                if(kbds[kIndex]) kbds[kIndex].classList.add('active');
                kIndex++;
                if(kIndex === konamiCode.length) {
                    // å½©è›‹ï¼šå…¨å±çˆ†å‘
                    targetHandFactor = 2.0; 
                    setTimeout(() => targetHandFactor = 0, 2000);
                    kIndex = 0;
                    setTimeout(() => {
                        kbds.forEach(k => k.classList.remove('active'));
                        hintBox.classList.remove('active');
                    }, 1000);
                }
            } else {
                kIndex = 0;
                kbds.forEach(k => k.classList.remove('active'));
                hintBox.classList.remove('active');
            }
        });

    </script>
</body>
</html>
